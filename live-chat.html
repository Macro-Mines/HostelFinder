<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Live Chat | HostelFinder</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      body {
        /* background: linear-gradient(135deg, #18181c 0%, #232526 100%); */
        background: black;
        min-height: 100vh;
        font-family: "Poppins", "Segoe UI", Arial, sans-serif;
        color: #f3f3f3;
        margin: 0;
      }
      .chat-container {
        max-width: 480px;
        margin: 40px auto;
        background: rgba(30, 30, 40, 0.97);
        border-radius: 18px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        padding: 0 0 18px 0;
        display: flex;
        flex-direction: column;
        height: 80vh;
        min-height: 420px;
      }
      .chat-header {
        padding: 18px 0 10px 0;
        text-align: center;
        font-size: 1.5em;
        color: #007bff;
        font-weight: 700;
        letter-spacing: 1px;
        border-bottom: 1px solid #3335;
        background: transparent;
        border-radius: 18px 18px 0 0;
        text-shadow: 0 2px 12px #000a;
        position: relative;
      }
      .chat-header button {
        position: absolute;
        top: 12px;
        right: 18px;
        background: none;
        border: none;
        font-size: 1.7em;
        color: #007bff;
        cursor: pointer;
        line-height: 1;
      }
      .chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 18px 18px 0 18px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        background: transparent;
        scrollbar-width: none; /* Firefox */
      }
      .chat-messages::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera */
      }
      .chat-msg {
        background: rgba(40, 40, 50, 0.92);
        border-radius: 10px;
        padding: 8px 12px;
        font-size: 1.08em;
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 2px 8px #0002;
        word-break: break-word;
      }
      .chat-user {
        color: #007bff;
        font-weight: 600;
        margin-right: 4px;
      }
      .chat-text {
        flex: 1;
        color: #fff6d6;
      }
      .chat-time {
        color: #aaa;
        font-size: 0.92em;
        margin-left: 8px;
      }
      .chat-form {
        display: flex;
        align-items: center;
        padding: 12px 18px 0 18px;
        gap: 8px;
        background: transparent;
      }
      .chat-input {
        flex: 1;
        padding: 10px 14px;
        border-radius: 8px;
        border: none;
        font-size: 1.08em;
        background: #232526;
        color: #fff;
        outline: none;
        box-shadow: 0 2px 8px #0002;
      }
      .chat-input:focus {
        border: 1.5px solid #007bff;
      }
      .chat-send-btn,
      .chat-emoji-btn {
        background: linear-gradient(90deg, #007bff 0%, #5ab6ff 100%);
        color: #232526;
        border: none;
        border-radius: 8px;
        padding: 8px 14px;
        font-size: 1.2em;
        font-weight: 600;
        box-shadow: 0 2px 8px #0003;
        cursor: pointer;
        transition: background 0.2s, color 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .chat-send-btn:hover,
      .chat-emoji-btn:hover {
        background: linear-gradient(90deg, #5ab6ff 0%, #007bff 100%);
        color: #232526;
      }
      .emoji-picker {
        position: absolute;
        bottom: 60px;
        left: 18px;
        background: #232526;
        border-radius: 10px;
        box-shadow: 0 2px 12px #0008;
        padding: 8px 10px;
        display: none;
        z-index: 10;
        flex-wrap: wrap;
        gap: 6px;
        max-width: 90vw;
      }
      .emoji {
        font-size: 1.4em;
        cursor: pointer;
        padding: 2px 6px;
        border-radius: 6px;
        transition: background 0.15s;
      }
      .emoji:hover {
        background: #007bff33;
      }
      @media (max-width: 600px) {
        .chat-container {
          max-width: 99vw;
          height: 92vh;
          min-height: 0;
        }
        .chat-header {
          font-size: 1.1em;
          padding: 12px 0 8px 0;
        }
        .chat-form {
          padding: 8px 6px 0 6px;
        }
        .chat-messages {
          padding: 10px 6px 0 6px;
        }
        .emoji-picker {
          left: 6px;
        }
      }
      a[href="home-page.html"] {
        color: #007bff !important;
      }
    </style>
  </head>
  <body>
    <div class="chat-container">
      <div class="chat-header">
        Live Chat With Users
        <button
          id="close-chat-tab"
          title="Close Chat"
          style="position:absolute; top:12px; right:18px; background:none; border:none; font-size:1.7em; color:#007bff; cursor:pointer; line-height:1;"
        >
          &times;
        </button>
      </div>
      <div class="chat-messages" id="chat-messages"></div>
      <form class="chat-form" id="chat-form" autocomplete="off">
        <button
          type="button"
          class="chat-emoji-btn"
          id="emoji-btn"
          title="Emoji"
        >
          ðŸ˜Š
        </button>
        <input
          type="text"
          class="chat-input"
          id="chat-input"
          placeholder="Type a message..."
          maxlength="200"
          required
        />
        <button type="submit" class="chat-send-btn" title="Send">
          <img
            src="images/send-icon.svg"
            alt="Send"
            style="width: 1.3em; height: 1.3em; filter: brightness(0) invert(1); display: block;"
          />
        </button>
        <div class="emoji-picker" id="emoji-picker"></div>
      </form>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <script src="live-chat.js"></script>
  </body>
</html>
